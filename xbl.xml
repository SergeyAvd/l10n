<?xml version="1.0"?>
  <!-- This Source Code Form is subject to the terms of the Mozilla Public
    - License, v. 2.0. If a copy of the MPL was not distributed with this
    - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:xbl="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml">
  <binding id="custom-browser-type-a">
    <implementation>
      <constructor>
        //console.log('this:', this); //xul vbox#myCustBrowser
        //alert(this.ownerDocument.defaultView.location);
        //var browserToolbar = document.getAnonymousElementByAttribute(this, "anonid", "button");
        //browserToolbar.style.MozBinding = this.ownerDocument.defaultView.location + 'xbl.xml'
        //commented this out because this location is location of xul file not of the xbl file
      </constructor>
      <method name="home">
        <body>
          <![CDATA[
            alert("home is clicked");
          ]]>
        </body>
      </method>
    </implementation>
    <content>
      <xul:commandset>
        <xul:command id="TypeA:Home" oncommand="home()"/>
        <xul:command id="TypeA:Back" oncommand="back()"/>
        <xul:command id="disableHome" oncommand="this.parentNode.ownerDocument.getElementById('TypeA:Home').setAttribute('disabled', true)"/>
        <xul:command id="enableHome" oncommand="this.parentNode.ownerDocument.getElementById('TypeA:Home').removeAttribute('disabled')"/>
      </xul:commandset>
      <xul:hbox anonid="browser-toolbar" style="-moz-binding:url('chrome://l10n/content/xbl.xml#browser-toolbar')" cmd_home="TypeA:Home" cmd_back="TypeA:Back"/>
      <xul:browser style="background-color:red; width:100px; height:100px;"/>
      <xul:button label="disable home" command="disableHome" observes="TypeA:Home" /> <!-- works -->
      <xul:button label="Test observes element">
        <xul:observes element="TypeA:Home" attribute="disabled"/>  <!-- should work, but its not -->
      </xul:button>
      <xul:button label="enable home" command="enableHome"/>
      <xul:button label="Home2" command="TypeA:Home"/>
      <xul:button label="Home3" command="TypeA:Home"/>
    </content>
  </binding>
  
  <binding id="browser-toolbar">
    <content>
      <xul:toolbar>
        <xul:button label="Home" xbl:inherits="command=cmd_home,observes=cmd_home"/>
        <xul:toolbarbutton label="Back" xbl:inherits="command=cmd_back"/>
        <xul:toolbarbutton label="Forward" disabled="true"/>
      </xul:toolbar>
    </content>
  </binding>
</bindings>
